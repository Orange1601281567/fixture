(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca9d94f"],{"5ced":function(e,a,t){},a15b:function(e,a,t){"use strict";var o=t("23e7"),r=t("44ad"),s=t("fc6a"),n=t("a640"),i=[].join,l=r!=Object,u=n("join",",");o({target:"Array",proto:!0,forced:l||!u},{join:function(e){return i.call(s(this),void 0===e?",":e)}})},a640:function(e,a,t){"use strict";var o=t("d039");e.exports=function(e,a){var t=[][e];return!!t&&o((function(){t.call(null,a||function(){throw 1},1)}))}},bb51:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-layout",[t("a-layout-header",{style:{position:"fixed",zIndex:1,width:"100%"}},[t("a-menu",{style:{lineHeight:"64px",float:"left"},attrs:{"default-selected-keys":["fix"],mode:"horizontal",theme:"dark"},on:{click:e.handleClick}},[e.getRole("user")?t("a-menu-item",{key:"user"},[t("a-icon",{attrs:{type:"user"}}),t("span",[e._v("用户管理")])],1):e._e(),e.getRole("hc")?t("a-menu-item",{key:"hc"},[t("a-icon",{attrs:{type:"bank"}}),t("span",[e._v("HC管理")])],1):e._e(),e.getRole("hcy")?t("a-menu-item",{key:"hcy"},[t("a-icon",{attrs:{type:"facebook"}}),t("span",[e._v("HC預簽")])],1):e._e(),t("a-menu-item",{key:"fix"},[t("a-icon",{attrs:{type:"instagram"}}),t("span",[e._v("Fixture list")])],1),e.getRole("fixy")?t("a-menu-item",{key:"fixy"},[t("a-icon",{attrs:{type:"ant-cloud"}}),t("span",[e._v("Fixture預簽")])],1):e._e()],1),t("div",{staticStyle:{float:"right"}},[t("a-dropdown-button",[e._v(" "+e._s(e.userInfo.name)+" "),t("a-menu",{attrs:{slot:"overlay"},on:{click:e.mineClick},slot:"overlay"},[-1!=this.role.indexOf("1")?t("a-menu-item",{key:"showchild"},[t("a-icon",{attrs:{type:"user"}}),e._v("添加子角色")],1):e._e(),t("a-menu-item",{key:"mine"},[t("a-icon",{attrs:{type:"user"}}),e._v("個人信息")],1),t("a-menu-item",{key:"changepwd"},[t("a-icon",{attrs:{type:"user"}}),e._v("更改密碼")],1),t("a-menu-item",{key:"logout"},[t("a-icon",{attrs:{type:"user"}}),e._v("退出")],1)],1),t("a-icon",{attrs:{slot:"icon",type:"user"},slot:"icon"})],1)],1)],1),t("a-layout-content",{style:{padding:"0 30px","padding-top":"30px",marginTop:"64px"}},[t("div",{style:{background:"#fff",padding:"24px",minHeight:"360px"}},[t("transition",{attrs:{name:e.transitionName}},[t("router-view")],1)],1)]),t("a-layout-footer",{staticStyle:{textAlign:"center"}},[e._v(" 該系統由系統開發課開發,請勿外傳系統資料,如若外傳,後果自負. ")])],1),t("a-drawer",{attrs:{title:"更改密碼",placement:"right",closable:!1,visible:e.pwdmodel},on:{close:e.onClose}},[t("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.userInfo,"label-col":{span:8},"wrapper-col":{span:14}}},[t("a-form-model-item",{attrs:{label:"用戶名"}},[t("a-input",{attrs:{disabled:""},model:{value:e.userInfo.username,callback:function(a){e.$set(e.userInfo,"username",a)},expression:"userInfo.username"}})],1),t("a-form-model-item",{attrs:{label:"姓名"}},[t("a-input",{attrs:{disabled:""},model:{value:e.userInfo.name,callback:function(a){e.$set(e.userInfo,"name",a)},expression:"userInfo.name"}})],1),t("a-form-model-item",{attrs:{label:"權限"}},[t("a-input",{attrs:{disabled:""},model:{value:e.userInfo.power,callback:function(a){e.$set(e.userInfo,"power",a)},expression:"userInfo.power"}})],1),t("a-form-model-item",{attrs:{label:"舊密碼",prop:"oldpassword"}},[t("a-input",{model:{value:e.userInfo.oldpassword,callback:function(a){e.$set(e.userInfo,"oldpassword",a)},expression:"userInfo.oldpassword"}})],1),t("a-form-model-item",{attrs:{label:"新密碼",prop:"newpassword"}},[t("a-input",{model:{value:e.userInfo.newpassword,callback:function(a){e.$set(e.userInfo,"newpassword",a)},expression:"userInfo.newpassword"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 修改 ")])],1)],1)],1),t("a-modal",{attrs:{zIndex:9,visible:e.showmine,footer:null},on:{cancel:e.hidepwdModal}},[t("a-descriptions",{attrs:{title:"基本信息"}},[t("a-descriptions-item",{attrs:{label:"用戶名"}},[e._v(" "+e._s(e.userInfo.username)+" ")]),t("a-descriptions-item",{attrs:{label:"姓名"}},[e._v(" "+e._s(e.userInfo.name)+" ")]),t("a-descriptions-item",{attrs:{label:"權限"}},[e._v(" "+e._s(e.userInfo.power)+" ")])],1)],1),t("a-modal",{attrs:{title:"添加子角色信息",visible:e.visible,zIndex:9,cancelText:"关闭",okText:"確定"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form-model",{ref:"ruleForms",attrs:{rules:e.rulestwo,model:e.formData,"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-model-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[t("a-input",{model:{value:e.formData.id,callback:function(a){e.$set(e.formData,"id",a)},expression:"formData.id"}})],1),t("a-form-model-item",{attrs:{label:"用戶名",prop:"username"}},[t("a-input",{model:{value:e.formData.username,callback:function(a){e.$set(e.formData,"username",a)},expression:"formData.username"}})],1),t("a-form-model-item",{attrs:{label:"姓名",prop:"name"}},[t("a-input",{model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),t("a-form-model-item",{attrs:{label:"密碼",prop:"password"}},[t("a-input",{model:{value:e.formData.password,callback:function(a){e.$set(e.formData,"password",a)},expression:"formData.password"}})],1),t("a-form-model-item",{attrs:{label:"幾種",prop:"qmodel"}},[t("a-checkbox-group",{model:{value:e.formData.qmodel,callback:function(a){e.$set(e.formData,"qmodel",a)},expression:"formData.qmodel"}},[t("a-checkbox",{attrs:{value:"Mongoose",name:"qmodel"}},[e._v(" Mongoose ")]),t("a-checkbox",{attrs:{value:"Bison",name:"qmodel"}},[e._v(" Bison ")]),t("a-checkbox",{attrs:{value:"Badger",name:"qmodel"}},[e._v(" Badger ")])],1)],1),t("a-form-model-item",{attrs:{label:"階段",prop:"build"}},[t("a-input",{model:{value:e.formData.build,callback:function(a){e.$set(e.formData,"build",a)},expression:"formData.build"}})],1),t("a-form-model-item",{attrs:{label:"Mail發送名單",prop:"process"}},[t("a-input",{model:{value:e.formData.process,callback:function(a){e.$set(e.formData,"process",a)},expression:"formData.process"}})],1)],1)],1)],1)},r=[],s=(t("a15b"),t("ac1f"),t("5319"),t("a18c")),n=t("c0c7"),i=t("c436"),l={data:function(){return{userInfo:{username:"",name:"",password:"",power:"",oldpassword:"",newpassword:""},transitionName:"slide-left",role:i["a"].getUser(),showmine:!1,pwdmodel:!1,rules:{oldpassword:[{required:!0,message:"請輸入舊密碼",trigger:"change"}],newpassword:[{required:!0,message:"請輸入新密碼",trigger:"change"}]},visible:!1,formData:{username:"",password:"",name:"",power:"",model:"",qmodel:[],build:"",process:"",pwdtime:"",pwdbyuser:"",powertime:"",powerbyuser:""},rulestwo:{id:[{required:!1}],username:[{required:!0,message:"請輸入用戶名",trigger:"change"}],name:[{required:!0,message:"請輸入密碼",trigger:"change"}],password:[{required:!0,message:"請輸入密碼",trigger:"change"}],qmodel:[{required:!0,message:"請選擇幾種",trigger:"change"}],process:[{required:!0,message:"請選擇郵件發送名單",trigger:"change"}]},userrole:i["a"].getByKey("fixy")}},methods:{getRole:function(e){return i["a"].getByKey(e)},handleClick:function(e){s["a"].push({name:e.key})},mineClick:function(e){"logout"==e.key&&(localStorage.clear(),s["a"].push({name:"login"})),"mine"==e.key&&(this.showmine=!0),"changepwd"==e.key&&(this.pwdmodel=!0),"showchild"==e.key&&(this.visible=!0)},onClose:function(){this.pwdmodel=!1},hidepwdModal:function(){this.showmine=!1},onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;e.userInfo.oldpassword!==e.userInfo.password?e.$message.error("舊密碼錯誤！"):(e.userInfo.password=e.userInfo.newpassword,e.userInfo.pwdbyuser=e.userInfo.username,e.userInfo.pwdtime=new Date,Object(n["d"])(e.userInfo).then((function(a){200==a.code&&(e.$message.success("修改成功"),e.pwdmodel=!1)})))}))},handleOk:function(){var e=this;this.$refs.ruleForms.validate((function(a){if(!a)return!1;Object(n["b"])().then((function(a){e.formData.power=a.data.power.replace("1","2"),e.formData.powerbyuser=a.data.username,e.formData.pwdbyuser=a.data.username,e.formData.powertime=new Date,e.formData.pwdtime=new Date,e.formData.model=e.formData.qmodel.join(","),Object(n["d"])(e.formData).then((function(a){e.$message.success("添加成功"),e.visible=!1}))}))}))},handleCancel:function(){this.visible=!1,this.$refs.ruleForms&&(this.$refs.ruleForms.resetFields()||this.$refs.ruleForms.clearValidate())}},created:function(){var e=this;s["a"].push({name:"fix"}),Object(n["b"])().then((function(a){e.userInfo=a.data,e.role=i["a"].getUser()}))}},u=l,m=(t("cccb"),t("2877")),c=Object(m["a"])(u,o,r,!1,null,null,null);a["default"]=c.exports},c0c7:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return n})),t.d(a,"a",(function(){return i}));var o=t("b775");t("bc3a");function r(){return Object(o["a"])({url:"/sysUsers/getInfo",method:"get"})}function s(e){return Object(o["a"])({url:"/sysUsers/pageList",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/sysUsers/save",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/sysUsers/"+e,method:"delete"})}},cccb:function(e,a,t){"use strict";t("5ced")}}]);
//# sourceMappingURL=chunk-0ca9d94f.1dc87d6c.js.map